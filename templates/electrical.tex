\documentclass[12pt,a4paper]{article}

% ---------- Engine-safe font setup ----------
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{tgheros}
  \renewcommand{\familydefault}{\sfdefault}
\else
  \usepackage{fontspec}
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
  \IfFontExistsTF{Inter}{\setmainfont{Inter}}{\setmainfont{TeX Gyre Heros}}
\fi

% ---------- Layout & micro-typography ----------
\usepackage[margin=1.8cm]{geometry}
\usepackage{microtype}
\usepackage{ragged2e}
\usepackage{enumitem}
\setlist[itemize]{nosep,left=1.4em,topsep=1pt,itemsep=3pt}
\setlength{\parskip}{3.0pt}
\setlength{\parindent}{0pt}
\linespread{1.05}

% ---------- Neutral colors ----------
\usepackage{xcolor}
\definecolor{text}{HTML}{111827}
\definecolor{muted}{HTML}{667085}
\definecolor{rule}{HTML}{CBD5E1}
\definecolor{accentA}{HTML}{1D4ED8} % link/separator
\definecolor{accentB}{HTML}{10B981} % secondary accent

% ---------- Hyperref ----------
\usepackage{hyperref}
\hypersetup{
  colorlinks=true, urlcolor=accentA, linkcolor=accentA,
  pdfauthor={<<PDF_AUTHOR>>}, pdftitle={<<PDF_TITLE>>},
  pdfsubject={<<PDF_SUBJECT>>}, pdfkeywords={<<PDF_KEYWORDS>>},
  pdfcreator={JSON->LaTeX Resume Pipeline}, pdfproducer={latexmk/xelatex}
}
\urlstyle{same}

% ---------- Headings (bold; compact separator) ----------
\usepackage{titlesec}
\usepackage{tikz}
\usetikzlibrary{calc,decorations.pathmorphing}
\newcommand{\SectionRule}{%
  \vspace{-6pt}%
  \begin{tikzpicture}[x=\linewidth,y=0.9pt]
    \draw[text!85!black, line width=0.8pt, line cap=round] (0,0) -- (1,0);
    \draw[accentA, opacity=.30, line width=0.8pt, line cap=round] (0,0) -- (.18,0);
    \draw[accentB, opacity=.25, line width=0.6pt, line cap=round] (0,-1.6) -- (.14,-1.6);
  \end{tikzpicture}%
  \vspace{-1pt}%
}
\titleformat{\section}{\Large\bfseries\color{text}}{}{0pt}{}[\SectionRule]
\titlespacing*{\section}{0pt}{4pt}{0pt}

% ---------- Optional icons stub ----------
\makeatletter
\IfFileExists{fontawesome5.sty}{\RequirePackage{fontawesome5}}{\newcommand{\faIcon}[1]{}}
\makeatother

% ---------- Skill chips ----------
\newcommand{\tagchip}[1]{%
  \tikz[baseline] \node[
    fill=accentA!5, text=accentA!95!black,
    rounded corners=2pt, inner xsep=4pt, inner ysep=1.6pt, anchor=base
  ]{\footnotesize #1};}

% ---------- Electrical/Battery themed background ----------
\usepackage{eso-pic}

% Battery cell symbol (rounded rectangle with + cap)
\newcommand{\BatteryCell}[1]{%
  \begin{tikzpicture}[scale=#1]
    % body
    \draw[rounded corners=1.2pt, line width=0.4pt, color=accentA, opacity=.18, fill=accentA!6]
      (0,0) rectangle (0.9,2.2);
    % positive cap
    \fill[accentA, opacity=.18] (0.35,2.2) rectangle (0.55,2.45);
    % plus sign (very faint)
    \draw[accentA!70!black, opacity=.18, line width=0.35pt] (0.45,1.2-0.18) -- (0.45,1.2+0.18);
    \draw[accentA!70!black, opacity=.18, line width=0.35pt] (0.45-0.18,1.2) -- (0.45+0.18,1.2);
  \end{tikzpicture}%
}

\newcommand{\ElectricalBackground}{%
  \begin{tikzpicture}[remember picture, overlay]
    % --- Top-right sine wave (signal) ---
    \begin{scope}[shift={($(current page.north east)+(-2.2cm,-1.2cm)$)}]
      \draw[accentA, line width=0.5pt, opacity=.20, domain=0:6.3, samples=100]
        plot (\x, {0.4*sin(2*\x r)}) ;
      \draw[accentB, line width=0.5pt, opacity=.18] (0,0) -- (6.3,0);
      % small markers
      \foreach \x in {0,1.57,3.14,4.71,6.28} {
        \draw[accentA, opacity=.18, line width=0.35pt] (\x,-0.15) -- (\x,0.15);
      }
    \end{scope}

    % --- Right margin: stacked battery cells ---
    \begin{scope}[shift={($(current page.north east)+(-0.9cm,-4.2cm)$)}]
      \foreach \y in {0,2.6,5.2,7.8,10.4}{
        \begin{scope}[shift={(0,-\y)}]
          \BatteryCell{0.9}
        \end{scope}
      }
    \end{scope}

    % --- Bottom-left PCB traces ---
    \begin{scope}[shift={($(current page.south west)+(1.0cm,1.1cm)$)}]
      \draw[accentA, line width=0.5pt, opacity=.20] (0,0) -- ++(2.0,0) -- ++(0,0.9) -- ++(3.6,0)
        to[out=0,in=270] ++(0.8,0.8) -- ++(0,0.4) -- ++(1.2,0);
      % vias/pads
      \foreach \p in {(1.0,0), (3.0,0), (3.0,0.9), (6.0,1.3)}{
        \fill[accentB, opacity=.20] \p circle [radius=0.06];
      }
      % a small capacitor symbol
      \draw[accentB, line width=0.5pt, opacity=.22] (2.2,0) -- (2.2,0.55);
      \draw[accentB, line width=0.8pt, opacity=.22] (2.05,0.55) -- (2.35,0.55);
      \draw[accentB, line width=0.8pt, opacity=.22] (2.05,0.75) -- (2.35,0.75);
      \draw[accentB, line width=0.5pt, opacity=.22] (2.2,0.75) -- (2.2,1.10);
    \end{scope}
  \end{tikzpicture}%
}
\AddToShipoutPictureBG*{\ElectricalBackground}

% ---------- Footer build stamp ----------
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{} \renewcommand{\headrulewidth}{0pt} \renewcommand{\footrulewidth}{0pt}
\fancyfoot[C]{\footnotesize\textit{\color{muted}Build: <<BUILD_TIME>> IST \,\,|\,\, hash: <<BUILD_HASH>>}}
\setlength{\footskip}{13pt}

% ---------- Top underline ----------
\newcommand{\SplitUnderline}[2]{%
  \begin{tikzpicture}[baseline, x=\linewidth, y=1pt]
    \draw[line width=#2, color=text!90!black, line cap=round] (0,0) -- (1,0);
    \draw[line width=#2, color=accentA, opacity=.35, line cap=round] (0,0) -- (#1,0);
  \end{tikzpicture}%
}

% ---------- Header + education macros ----------
\newcommand{\NameFont}{\fontsize{23}{26}\selectfont\bfseries}
\newcommand{\ContactFont}{\normalsize}
\newcommand{\ExperienceEntry}[3]{%
  \noindent\begin{tabular*}{\linewidth}{@{}l@{\extracolsep{\fill}}r@{}}
    \textbf{#1} & {\small #3}\\[-2pt]
    \textit{#2} & \\
  \end{tabular*}\par
}
% Flush-left project block with optional tech line
\newcommand{\ProjectEntry}[3]{%
  \par\noindent\textbf{#1}\\
  #2%
  \if\relax\detokenize{#3}\relax\else\\\textcolor{muted}{#3}\fi
  \par\vspace{2pt}
}
\newcommand{\EducationEntry}[3]{%
  \noindent\textbf{#1} --- #2%
  \if\relax\detokenize{#3}\relax\else\\\textcolor{muted}{#3}\fi
  \par\vspace{2pt}
}

\begin{document}
\color{text}
\justifying

% ---------- Header ----------
\noindent
\begin{minipage}{0.60\linewidth}
  {\NameFont <<NAME>>}\\[-1pt]
  \small\textcolor{muted}{\textbf{Electrical Engineer — Battery Systems}} % e.g., Electrical Engineer — Battery Systems
\end{minipage}%
\hfill
\begin{minipage}{0.38\linewidth}\raggedleft
  {\ContactFont <<CONTACT_BLOCK>>} % e.g., email | phone | city | LinkedIn
\end{minipage}

\vspace{3pt}
\SplitUnderline{0.86}{1.1pt}

% ===================== Body (single column) =====================
\section*{Summary}
\small <<SUMMARY>>

\section*{Skills}
\textbf{Engineering:} <<SK_ENGINEERING>> \\
\textbf{Software:} <<SK_SOFTWARE>> \\
\textbf{Electronics/IoT:} <<SK_EIOT>> \\
\textbf{Analysis:} <<SK_ANALYSIS>> \\
\textbf{Soft Skills:} <<SK_SOFT>>


\section*{Experience}
<<EXPERIENCE_BLOCK>>

\section*{Projects}
<<PROJECTS_BLOCK>>

\section*{Education}
<<EDUCATION_BLOCK>>

\section*{Achievements}
\begin{itemize}
<<ACHIEVEMENTS_BLOCK>>
\end{itemize}

\section*{Languages}
\textbf{Spoken:} <<LANG_SPOKEN>>

\end{document}
